Q5の問題では、 ∑ の添字から常に i<j が保証されます。 一方で、この i と j を入れ替えて j<i としても、 積の順番を交換しただけなので総和の値は等しくなります。つまり求める値を T とおいて以下のように表せます。

T=i=0∑N−1​j=i+1∑N−1​Ai​×Aj​=j=0∑N−1​i=j+1∑N−1​Ai​×Aj​

ここで上式の第 2 辺は i<j なる全ての (i,j) の組を、第 3 辺は j<i なる全ての (i,j) の組を足し合わせています。 このそれぞれの和に i=j なる全ての (i,j) の組を加えれば、これはすべての (i,j) の組を求めることに帰結します。

i=0∑N−1​j=0∑N−1​Ai​×Aj​=i=0∑N−1​j=i+1∑N−1​Ai​×Aj​+j=0∑N−1​i=j+1∑N−1​Ai​×Aj​+i=0∑N−1​Ai​×Ai​

ここまでと前問の議論より、S=∑i=0N−1​Ai​ として (左辺)=S2 であるため、

S2=2×T+i=0∑N−1​Ai2​∴T=21​∗(S2−i=0∑N−1​Ai2​)

となります。